<?xml version="1.0" encoding="UTF-8"?>
<Data>
    <程序配置>
        <启动按钮配置>
            <Start Mode="1">
                <IN_IO bit="E1.0" value="1"/>
                <IN_IO bit="E1.1" value="1"/>
            </Start>
            <Start Mode="2">
                <IN_IO bit="E1.1" value="1"/>
            </Start>
        </启动按钮配置>
        <安全配置>
            <三色灯软元件>
		<流程 name = "总状态">  <!--流程节点为项目定制版本中,刘伟增加,主分支无此项解析-->
		        <!--四种编号指示灯-->
		        <灯名称 ID="1">
		            <!--确定为红灯，下面的注释不解析，注释只起方便配置作用-->
		            <注释>红灯</注释>
		            <软元件 bitname="Q10.2" value="1"/>
		        </灯名称>
		        <灯名称 ID="2">
		            <注释>绿灯</注释>
		            <软元件 bitname="Q10.4" value="1"/>
		        </灯名称>
		        <灯名称 ID="3">
		            <注释>黄灯</注释>
		            <软元件 bitname="Q10.6" value="1"/>
		        </灯名称>
		        <灯名称 ID="4">
		            <注释>蜂鸣器</注释>
		            <软元件 bitname="Q10.0" value="1"/>
		        </灯名称>
		</流程>
		<流程 name = "A"> <!--流程节点为项目定制版本中,刘伟增加,主分支无此项解析-->
		        <!--四种编号指示灯-->
		        <灯名称 ID="1">
		            <!--确定为红灯，下面的注释不解析，注释只起方便配置作用-->
		            <注释>红灯</注释>
		            <软元件 bitname="Q10.2" value="1"/>
		        </灯名称>
		        <灯名称 ID="2">
		            <注释>绿灯</注释>
		            <软元件 bitname="Q10.4" value="1"/>
		        </灯名称>
		        <灯名称 ID="3">
		            <注释>黄灯</注释>
		            <软元件 bitname="Q10.6" value="1"/>
		        </灯名称>
		        <灯名称 ID="4">
		            <注释>蜂鸣器</注释>
		            <软元件 bitname="Q10.0" value="1"/>
		        </灯名称>
		</流程>
            </三色灯软元件>
            <三色灯配置>
                <!--三种亮灯类型-->
                <信号等级 ID="1"><!-- 等级1表示急停 一般用于急停按钮-->
                    <类型>escape</类型> <!--闪灯类型：快闪escape， 慢闪slow，长亮longBright-->
                    <亮灯种类>
                        <信号灯>1</信号灯>
                        <信号灯>4</信号灯>
                    </亮灯种类>
                </信号等级>
                <信号等级 ID="2"><!-- 等级2也表示急停 一般用于安全光栅-->
                    <类型>slow</类型>          
                    <亮灯种类>
                        <信号灯>1</信号灯>
                        <信号灯>2</信号灯>
                    </亮灯种类>
                </信号等级>
                <信号等级 ID="3"><!-- 等级3表示普通停止 -->
                    <类型>slow</类型>
                    <!--慢闪-->
                    <亮灯种类>
                        <信号灯>1</信号灯>
                        <信号灯>2</信号灯>
                    </亮灯种类>
                </信号等级>
                <信号等级 ID="4"><!-- 等级4表示复位 -->
                    <类型>longBright</类型>
                    <!--长亮-->
                    <亮灯种类>
                        <信号灯>1</信号灯>
                        <信号灯>2</信号灯>
                    </亮灯种类>
                </信号等级>
                <信号等级 ID="15"><!-- 等级15流程出现故障 -->
                    <类型>longBright</类型>
                    <!--长亮-->
                    <亮灯种类>
                        <信号灯>1</信号灯>
                    </亮灯种类>
                </信号等级>
                <信号等级 ID="16">
                    <类型>longBright</类型><!-- 等级16readystate -->
                    <!--长亮-->
                    <亮灯种类>
                        <信号灯>3</信号灯>
                    </亮灯种类>
                </信号等级>
                <信号等级 ID="17">
                    <类型>longBright</类型><!-- 等级17流程运行中 -->
                    <!--长亮-->
                    <亮灯种类>
                        <信号灯>2</信号灯>
                    </亮灯种类>
                </信号等级>
            </三色灯配置>
           <安全状态>
   		<总状态>
		        <安全信息 ID="1">
		            <信号等级>1</信号等级>
			    <信号点位集合>
		            	<信号点位 bitname="E10.6" value="0">
		            		<输出状态信息>急停被按下</输出状态信息>
				</信号点位>
				<信号点位 bitname="E10.5" value="0">
		            		<输出状态信息>急停被按下</输出状态信息>
				</信号点位>
				<信号点位 bitname="E10.4" value="0">
		            		<输出状态信息>急停被按下</输出状态信息>
				</信号点位>
		            </信号点位集合>
		        </安全信息>
		        <安全信息 ID="3">
		            <信号等级>3</信号等级>
		            <信号点位集合>
		            	<信号点位 bitname="E10.7" value="0">
		            		<输出状态信息>停止被按下</输出状态信息>
				</信号点位>
				<信号点位 bitname="E10.8" value="0">
		            		<输出状态信息>停止被按下</输出状态信息>
				</信号点位>
				<信号点位 bitname="E10.9" value="0">
		            		<输出状态信息>停止被按下</输出状态信息>
				</信号点位>
		            </信号点位集合>
		        </安全信息>
		</总状态>
		<子状态>
			<子流程 name = "A">
				<安全信息 ID="1">
				    <信号等级>1</信号等级>
				    <信号点位集合>
				    	<信号点位 bitname="E2.6" value="0">
				    		<输出状态信息>急停被按下</输出状态信息>
					</信号点位>
					<信号点位 bitname="E2.5" value="0">
				    		<输出状态信息>急停被按下</输出状态信息>
					</信号点位>
					<信号点位 bitname="E2.4" value="0">
		            			<输出状态信息>急停被按下</输出状态信息>
					</信号点位>
		            	     </信号点位集合>
				</安全信息>
				<安全信息 ID="3">
				    <信号等级>3</信号等级>
				    <信号点位集合>
				    	<信号点位 bitname="E2.7" value="0">
				    		<输出状态信息>停止被按下</输出状态信息>
					</信号点位>
					<信号点位 bitname="E2.8" value="0">
				    		<输出状态信息>停止被按下</输出状态信息>
					</信号点位>
					<信号点位 bitname="E2.9" value="0">
				    		<输出状态信息>停止被按下</输出状态信息>
					</信号点位>
				    </信号点位集合>
				</安全信息>
				<安全信息 ID="4">
				    <信号等级>4</信号等级>
				    <信号点位集合>
				    	<信号点位 bitname="E2.7" value="0">
				    		<输出状态信息>复位被按下</输出状态信息>
					</信号点位>
					<信号点位 bitname="E2.8" value="0">
				    		<输出状态信息>复位被按下</输出状态信息>
					</信号点位>
					<信号点位 bitname="E2.9" value="0">
				    		<输出状态信息>复位被按下</输出状态信息>
					</信号点位>
				    </信号点位集合>
				</安全信息>
				 <安全信息 ID="5">
				    <信号等级>5</信号等级>
				    <信号点位集合>
				    	<信号点位 bitname="E1.7" value="0">
				    		<输出状态信息>启动被按下</输出状态信息>
					</信号点位>
					<信号点位 bitname="E1.8" value="0">
				    		<输出状态信息>启动被按下</输出状态信息>
					</信号点位>
					<信号点位 bitname="E1.9" value="0">
				    		<输出状态信息>启动被按下</输出状态信息>
					</信号点位>
				    </信号点位集合>
				</安全信息>
				 <安全信息 ID="6">
				    <信号等级>6</信号等级>
				    <信号点位集合>
				    	<信号点位 bitname="E1.7" value="0">
				    		<输出状态信息>回原点被按下</输出状态信息>
					</信号点位>
					<信号点位 bitname="E1.8" value="0">
				    		<输出状态信息>回原点被按下</输出状态信息>
					</信号点位>
					<信号点位 bitname="E1.9" value="0">
				    		<输出状态信息>回原点被按下</输出状态信息>
					</信号点位>
				    </信号点位集合>
				</安全信息>
			</子流程>
		</子状态>
             </安全状态>
        </安全配置>
	 <计时集合>
		<计时>
		     <编号>1</编号>
		     <注释>编号1</注释>
		</计时>
		<计时>
		     <编号>2</编号>
		     <注释>编号2</注释>
		</计时>
	</计时集合>
	<等待指令集合>
		<等待指令>
			<编号>1</编号>
		     	<信息>(串口1 ≈ asbc)$(TCP1 > 20.29)</信息>
			<报警>123456</报警>
			<超时>500</超时>
		</等待指令>
	</等待指令集合>
	<保护事件配置> <!-- 保护事件分两种，一种轴的保护，一种坐标的保护-->
		<轴保护> 
			<轴信息 Id="y"> <!-- Id 对应硬件xml轴的编号-->
				<事件>(串口1 ≈ asbc)$(TCP1 > 20.29)</事件> <!--保护条件 -->
				<注释>自定义</注释> <!--自定义报错的语句 -->
			</轴信息>
		</轴保护>
		<坐标保护>
			<坐标信息 Id="y坐标">
				<事件>(串口1 ≈ asbc)$(TCP1 > 20.29)</事件>
				<注释>自定义</注释>
			</坐标信息>
		</坐标保护>
	</保护事件配置>
        <汽缸集合>
            <汽缸>
                <编号>1</编号>
		<软元件集合>
                	<软元件>Q1.1</软元件>
		</软元件集合>
                <原点>E0.0</原点>
                <动点>E0.1</动点>
                <超时>12000</超时>
                <单步延时>10</单步延时>
                <信息集合>
                    <信息 key="1" 内容="汽缸1 is timeout！"/>
                    <信息 key="2" 内容="汽缸1 is ok！"/>
                    <信息 key="3" 内容="12345633"/>
                    <信息 key="4" 内容="12345644"/>
                    <信息 key="5" 内容="12345655"/>
                </信息集合>
            </汽缸>
        </汽缸集合>
        <条件判断><!--> $ = & <-->
             <条件信息>
                <编号>1</编号>
                <条件类型 type="数据">
                    <信息>(E0.1 = 1)$(y1 > 20.29)</信息>
                </条件类型>
            </条件信息>
            <条件信息>
                <编号>2</编号>
                <条件类型 type="计数">
		    <信息>5</信息>
                </条件类型>
            </条件信息>
        </条件判断>
        <通信部分>
            <串口通信>
                <通信数据>
                    <编号>1</编号>
                    <串口编号>1</串口编号>
                    <数据保存>串口1</数据保存>
                    <数据>123456789</数据>
                   <数据格式>16</数据格式>
                </通信数据>
            </串口通信>
            <网络通信>
                <通信数据>
                    <编号>1</编号>
                    <网络编号>1</网络编号>
                    <数据保存>TCP1</数据保存>
                    <数据>aaaa</数据>
                    <IP地址>192.168.0.2</IP地址>
                </通信数据>
            </网络通信>
            <MQtt通讯>
		<通信数据>
			<ID>R</ID>
			<MQtt编号>1</MQtt编号>
			<主题>X</主题>
			<数据保存>value.txt</数据保存>   
			<数据>value</数据>
			<超时>100</超时>   
		</通信数据>  
		       
	    </MQtt通讯>
        </通信部分>
        <数据保存>
            <保存路径 key="串口1" address="comm1.txt"/>
            <保存路径 key="TCP1" address="tcp1.txt"/>
        </数据保存>
        <数据上传>
            <通讯数据>
                <编号>1</编号>
                <数据回复>123456789</数据回复>
                <数据采集>
                    <数据保存>串口1</数据保存>
                    <数据保存>TCP1</数据保存>
                </数据采集>
            </通讯数据>
        </数据上传>
        <运动部分>
            <动态脚本部分> <!-- 王小英 -->
                <动态脚本>
                    <编号>1</编号>
                    <脚本功能名>init</脚本功能名>
                    <数据保存>串口1</数据保存>
                    <偏移对象 Id="20" type="快速定位"/><!-- 快速定位，直线插补类型下，对应的脚本函数必须有两个参数 init(a,b)-->
                </动态脚本>
		<动态脚本>
                    <编号>1</编号>
                    <脚本功能名>init1</脚本功能名>
                    <数据保存>串口1</数据保存>
                    <偏移对象 Id="20" type="第三方机构"/><!-- 第三方机构类型，对应的脚本函数不需要参数 init1()-->
                </动态脚本>
            </动态脚本部分>
            <励磁>
                <输出>
                    <比特 bit="1" vaule="1"/>
                    <比特 bit="2" vaule="1"/>
                    <比特 bit="0" vaule="1"/>
                    <比特 bit="3" vaule="1"/>
                </输出>
                <输入>
                    <比特 bit="0" vaule="1"/>
                    <比特 bit="1" vaule="1"/>
                    <比特 bit="2" vaule="1"/>
                    <比特 bit="6" vaule="0"/>
                </输入>
            </励磁>
            <回原点>
                <原点轴信息>
                    <轴信息 Id="x">
			<类型>1</类型>  <!--原有的模式为1 新增模式为 2-->
                        <高速>10</高速>
                        <低速>1</低速>
                        <方向>1</方向>
			<正向时间>3000</正向时间>
                        <原点偏移时间>100</原点偏移时间>
                        <超时>45000</超时>
                    </轴信息>
                </原点轴信息>
                <原点操作信息>
                    <原点信息>
                        <编号>1</编号>
                        <超时>45000</超时>
                        <轴集合>
                            <轴编号>x</轴编号>
                        </轴集合>
                    </原点信息>
                </原点操作信息>
            </回原点>
            <快速定位>
                <快速定位信息>
                    <编号>21</编号>
                    <注释>编号1</注释>
                    <超时>18000</超时>
                    <单步延时>10</单步延时>
                    <速度百分率>100</速度百分率>
                    <加速>25000</加速>
                    <减速>25000</减速>
                    <轴数>1</轴数>
                    <轴集合>
                        <轴信息 Id="y">
                            <速度百分率>80</速度百分率>
                            <位置>100.12</位置>
                            <位置偏移量>0</位置偏移量>
                        </轴信息>
                    </轴集合>
                </快速定位信息>
            </快速定位>
	    <寸动>
		<寸动信息>
                    <编号>21</编号>
                    <注释>编号1</注释>
                    <超时>18000</超时>
                    <单步延时>10</单步延时>
                    <加速>5000</加速>
                    <减速>5000</减速>
		    <方向>1</方向>
                    <轴集合>
                        <轴信息 Id="y">
                            <速度百分率>80</速度百分率>
			    <比特 bit="E0.1" vaule="1"/>
                        </轴信息>
			 <轴信息 Id="y1">
                            <速度百分率>80</速度百分率>
			    <比特 bit="E0.2" vaule="1"/>
                        </轴信息>
                    </轴集合>
                </寸动信息>
	    </寸动>
           <直线插补模式>
               <插补信息>
		<编号>1</编号>
		<注释>编号1</注释>
                <超时>800</超时>
                <单步延时>1000</单步延时>
                <速度>500</速度>
                <加速>10000</加速>
                <直线位置>
                       	<轴集合>
                       		<触发信息>
                                	<触发集合>
                                   		<触发I0信息 bit="Q0.3" value="1"/>
                                    		<触发位置>
                                       			<坐标信息 pos="50" Id="X坐标"/>
                                       			<坐标信息 pos="50" Id="Y坐标"/>
							<坐标信息 pos="50" Id="Z坐标"/>
                                   		</触发位置>
                              		</触发集合>
                              		<触发集合>
                                   		<触发I0信息 bit="Q0.2" value="1"/>
                                    		<触发位置>
                                      			<坐标信息 pos="30" Id="X坐标"/>
                                       			<坐标信息 pos="30" Id="Y坐标"/>
							<坐标信息 pos="50" Id="Z坐标"/>
                                   		</触发位置>
                               		</触发集合>
                           	</触发信息>
                          	<坐标位置信息>
                               		<坐标信息 Id="X坐标">
                                    		<目标位置>100</目标位置>
                               		</坐标信息>
                              		<坐标信息 Id="Y坐标">
                                    		<目标位置>100</目标位置>
                                	</坐标信息>
					<坐标信息 Id="Z坐标">
                                    		<目标位置>100</目标位置>
                                	</坐标信息>
                           	</坐标位置信息>
                        </轴集合>
                       	<轴集合>
                            	<坐标位置信息>
                                	<坐标信息 Id="X坐标">
                                   		 <目标位置>300</目标位置>
                                	</坐标信息>
                               		<坐标信息 Id="Y坐标">
                                   		<目标位置>300</目标位置>
                                	</坐标信息>
					<坐标信息 Id="Z坐标">
                                    		<目标位置>100</目标位置>
                                	</坐标信息>
                            	</坐标位置信息>   			
                        </轴集合>			
                   </直线位置>
		<坐标位置偏移信息>
				<X坐标>0.0</X坐标>
				<Y坐标>0.0</Y坐标>
				<Z坐标>0.0</Z坐标>
		</坐标位置偏移信息>
             </插补信息>
           </直线插补模式>			 
        </运动部分>
        <运动>
            <轴信息>
                <J1>X</J1>
                <J2>Y</J2>
                <J3>Z</J3>
                <J4>R</J4>
            </轴信息>
            <路径信息>
                <路径 MaxVel="18" Type="样条曲线" Mode="文件导入" Id="A" VelocityProfile="矩形">
                    <!--路径 Mode="文件导入" Id="A" MaxVel="10" Type="样条曲线" VelocityProfile="S形" StartVel="0" Duration="10" SartAcc="0" EndVel="0" EndAcc="0"-->
                    <数据文件>/home/cofei/用户文件夹/Data/点位数据.txt</数据文件>
                    <R轴旋转>disenable</R轴旋转>
                    <R轴旋转角度>-360</R轴旋转角度>
                    <IO/>
                    <出胶提前时间>100</出胶提前时间>
                    <停止出胶提前时间>100</停止出胶提前时间>
                    <x缩放系数>0.98</x缩放系数>
		    <y缩放系数>0.98</y缩放系数>
                </路径>
                <路径 MaxVel="5" Type="样条曲线" Mode="文件导入" Id="B" VelocityProfile="矩形">
                    <!--路径 Mode="文件导入" Id="A" MaxVel="10" Type="样条曲线" VelocityProfile="S形" StartVel="0" Duration="10" SartAcc="0" EndVel="0" EndAcc="0"-->
                    <数据文件>/home/cofei/用户文件夹/Data/点位数据.txt</数据文件>
                    <R轴旋转>disenable</R轴旋转>
                    <R轴旋转角度>-360</R轴旋转角度>
                    <IO/>
                    <出胶提前时间>100</出胶提前时间>
                    <停止出胶提前时间>100</停止出胶提前时间>
                    <x缩放系数>0.98</x缩放系数>
		    <y缩放系数>0.98</y缩放系数>
                </路径>
                <路径 MaxVel="30" Type="样条曲线" Mode="示教" Id="c" VelocityProfile="矩形">
                    <示教点>P10</示教点>
                    <示教点>P11</示教点>
                    <示教点>P12</示教点>
                    <示教点>P13</示教点>
                    <示教点>P12</示教点>
                    <示教点>P10</示教点>
                </路径>
            </路径信息>
            <工具参数文件>/usr/COFEI/Data/点位数据/投影长度.txt</工具参数文件>
        </运动>
	<托盘指令>
            <托盘信息 name="Pallet_1">
                <轴信息>
		    <X>J1</X>
		    <Y>J2</Y>
		    <Z>J3</Z>	
                </轴信息>
                <行列层数>
                    <行数>2</行数>
                    <列数>3</列数>
                    <层数>2</层数>
                </行列层数>
       	        <校准位置>
                    <第一层托盘>
                        <左上>tp1</左上>
                        <右上>tp2</右上>
                        <左下>tp3</左下>
                        <右下>tp4</右下>
                    </第一层托盘>
                    <最后一层托盘>
                        <左上>tp5</左上>
                    </最后一层托盘>
                    <结束位置>tp6</结束位置>
                </校准位置>
                <工作模式>
                    <!-- 1 - 递增, 2 - 定位 -->
                    <抓取模式>1</抓取模式>
                    <!-- 1 - 按行, 2 - 按列　-->
                    <移动方向>1</移动方向>
                    <!-- 1 - pp, 2 - csp -->
                    <运动模式>333</运动模式>
                </工作模式>
                <运动参数>
                    <递增>
                        <超时>10000</超时>
                        <单步延时>10</单步延时>
                        <速度百分率>10</速度百分率>
                        <加速>250</加速>
                        <减速>250</减速>
                    </递增>
                    <定位>
                        <超时>10000</超时>
                        <单步延时>20</单步延时>
                        <速度百分率>50</速度百分率>
                        <加速>50000</加速>
                        <减速>50000</减速>
                    </定位>
                </运动参数>
                <结束信号>
                    <本层结束信号 bit="LQ15.14" value="1"/>
                    <全部结束信号 bit="LQ15.15" value="1"/>
  		</结束信号>
		<托盘重置配置>
		    <托盘重置信号 bit="LE15.15" value="1"/>	
		</托盘重置配置>
            </托盘信息>
        </托盘指令>
    </程序配置>
</Data>
